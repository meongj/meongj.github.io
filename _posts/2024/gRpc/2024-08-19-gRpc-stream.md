---
layout: post
title: "gRpc-stream"
date: 2024-08-19
categories: gRpc 
---

# gRpc-stream 정의
- gRpc(Google Remote Procedure Call)서 제공하는 데이터 통신 방식 중 하나
- 클라이언트와 서버 간에 연속적이고 비동기적인 데이터 스트림 전송
### 비교
- 일반적인 gRpc : 요청과 응답이 한번씩 주고 받는 형식
- gRPC Stream : 여러 번의 데이터 전송 가능, 스트림(연속적인 데이터 흐름)으로 처리



# gRpc-stream 유형
## 1. Server-Side Streaming(서버 스트리밍)
- 클라이언트가 서버로 요청을 보내면, 서버는 하나의 응답이 아닌 여러 개의 응답 보낸다
- 클라이언트는 이 스트림을 수신하며, 데이터 처리
## 2. Client-Side Streaming(클라이언트 스트리밍)
- 클라이언트가 서버로 여러 개의 요청 스트림 보냄
- 서버는 데이터를 모두 받은 후 처리 결과 반환
## 3. Bidirectional Streaming(양방향 스트리밍)
- 클라이언트와 서버가 동시에 여러 개의 메시지를 스트리밍
- 클라이언트는 여러 개의 요청을 보내고, 서버는 그에 대한 응답 보냄
  - 두 스트림은 독립적으로 처리


# 언제 사용 하는가?
- 실시간 데이터 처리가 필요한 경우
  - 예) 실시간 주식 시세, 실시간 채팅 애플리케이션 등
    - 회사 : 실시간 token 리스트를 불러오고 싶을때 사용(token이 추가 되었거나 신규 broker 추가될때 업데이트를 바로 하기 위함)
- 연속적인 데이터 흐름 필요한 경우
  - 클라이언트가 서버로 부터 지속적인 데이터 스트림 받아야할때, 파일을 여러 부분으로 나누어서 전송, 비디오 스트리밍 등


# 왜 사용 하는가?
1. 효율성
   - 클라이언트와 서버간 지속적인 연결 유지
   - 여러 개의 독립적인 요청-응답 패턴보다 네트워크 사용 효율적
2. 비동기 처리
   - 스트리밍 통신은 비동기로 처리되기 때문에, 클라이언트와 서버는 각자의 데이터를 독립적으로 처리하면서 송수신
3. 지연시간 감소
   - 데이터 하나씩 주고 받는 일반적인 gRpc 아니라,
   - 연속적인 데이터 전송이 가능해서 통신 오버헤드가 줄고 전송속도가 빠르다




